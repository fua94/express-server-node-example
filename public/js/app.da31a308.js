(function(t){function e(e){for(var a,o,i=e[0],c=e[1],l=e[2],d=0,m=[];d<i.length;d++)o=i[d],s[o]&&m.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(m.length)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),s=n("8c4f"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container p-4"},[t.isError?[t._m(0)]:[n("div",{staticClass:"row"},[t._l(t.tasks,function(e,a){return n("task-component",{key:e._id,attrs:{task:e},on:{delete:function(n){return t.onPressDelete(a,e)},update:function(e){var n=arguments.length,s=Array(n);while(n--)s[n]=arguments[n];return t.onPressUpdate.apply(void 0,[a].concat(s))}}})}),n("div",{staticClass:"col-md-4"},[t.isAdd?n("form-component",{on:{add:function(e){return t.onSubmitAdd.apply(void 0,arguments)},cancel:t.onPressCancel}}):n("button",{staticClass:"btn btn-primary",on:{click:function(e){t.isAdd=!0}}},[t._v("\n                    New task\n                ")])],1)],2)]],2)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("h1",[t._v("Please login!")])])}],i=n("cebc"),c=(n("96cf"),n("3b8d")),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-md-4"},[n("div",{staticClass:"card mb-2"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[t.isEdit?n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.task.title,expression:"task.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Task"},domProps:{value:t.task.title},on:{input:function(e){e.target.composing||t.$set(t.task,"title",e.target.value)}}})]):n("h2",[t._v(t._s(t.task.title))])]),n("div",{staticClass:"card-text"},[t.isEdit?n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.description,expression:"task.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Description"},domProps:{value:t.task.description},on:{input:function(e){e.target.composing||t.$set(t.task,"description",e.target.value)}}})]):n("p",[t._v("\n                    "+t._s(t.task.description)+"\n                ")]),n("div",{staticClass:"d-flex justify-content-between"},[t.isEdit?[n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.onClickUpdate}},[t._v("Save")]),n("button",{staticClass:"btn btn-danger ",attrs:{type:"button"},on:{click:t.onClickCancel}},[t._v("Cancel")])]:[n("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.onClickEdit}},[t._v("Update")]),n("button",{staticClass:"btn btn-danger ",attrs:{type:"button"},on:{click:t.onClickDelete}},[t._v("Delete")])]],2)])])])])},u=[],d={props:["task"],data:function(){return{isEdit:!1,mine:!0}},mounted:function(){},methods:{onClickDelete:function(){this.$emit("delete")},onClickEdit:function(){this.isEdit=!0},onClickUpdate:function(){this.$emit("update",this.task),this.isEdit=!1},onClickCancel:function(){this.isEdit=!1}}},m=d,p=n("2877"),f=Object(p["a"])(m,l,u,!1,null,null,null),v=f.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{on:{submit:function(e){return e.preventDefault(),t.onClickAdd(e)}}},[n("div",{staticClass:"card mb-2"},[n("div",{staticClass:"card-body"},[n("div",{staticClass:"card-title"},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.task.title,expression:"task.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Task"},domProps:{value:t.task.title},on:{input:function(e){e.target.composing||t.$set(t.task,"title",e.target.value)}}})])]),n("p",{staticClass:"card-text"}),n("div",{staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.task.description,expression:"task.description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Description"},domProps:{value:t.task.description},on:{input:function(e){e.target.composing||t.$set(t.task,"description",e.target.value)}}})]),n("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"submit"}},[t._v("Add")]),n("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.onClickCancel}},[t._v("Cancel")]),n("p")])])])},h=[],k={data:function(){return{task:{title:"",description:""}}},created:function(){},methods:{onClickAdd:function(){this.$emit("add",this.task)},onClickCancel:function(){this.$emit("cancel")}}},b=k,C=Object(p["a"])(b,g,h,!1,null,null,null),w=C.exports,_=n("2f62"),y={components:{TaskComponent:v,FormComponent:w},data:function(){return{isAdd:!1,isEdit:!1,isError:!1}},created:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchTasks(localStorage.getItem("access_token")).then(function(t){e.isError=!1}).catch(function(t){e.isError=!0});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),computed:Object(_["c"])(["tasks"]),methods:Object(i["a"])({},Object(_["b"])(["fetchTasks","addTask","deleteTask","updateTask"]),{onSubmitAdd:function(t){this.addTask(t),this.isAdd=!1},onPressDelete:function(t,e){confirm("Are u sure?")&&this.deleteTask(e,t)},onPressUpdate:function(t,e){this.updateTask(e,t)},onPressCancel:function(){this.isAdd=!1}})},x=y,T=Object(p["a"])(x,r,o,!1,null,null,null),$=T.exports,P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container p-4"},[n("div",{staticClass:"row"},[n("div",{staticClass:"mx-auto w-50 card"},[n("div",{staticClass:"card-body"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmitLogin(e)}}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"email"}},[t._v("Email address")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],staticClass:"form-control",attrs:{type:"email",name:"email","aria-describedby":"emailHelp",placeholder:"Enter email"},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}}),n("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("We'll never share your email with anyone else.")])]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}})]),t._m(0),n("div",{staticClass:"form-group"},[n("span",{staticClass:"text-danger"},[t._v("\n                        "+t._s(t.error)+"\n                    ")])]),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")])])])])])])},E=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group form-check"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"}}),n("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[t._v("Check me out")])])}],j={data:function(){return{credentials:{email:"",password:""},error:""}},methods:{onSubmitLogin:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("retrieveToken",this.credentials).then(function(t){e.$router.push({name:"tasks"}),e.error=""}).catch(function(t){e.error="User/Passwords not found"});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},O=j,S=Object(p["a"])(O,P,E,!1,null,null,null),U=S.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container p-4"},[n("div",{staticClass:"row"},[n("div",{staticClass:"mx-auto w-50 card"},[n("div",{staticClass:"card-body"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmitRegister(e)}}},[n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"name"}},[t._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.name,expression:"credentials.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"Enter name"},domProps:{value:t.credentials.name},on:{input:function(e){e.target.composing||t.$set(t.credentials,"name",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"email"}},[t._v("Email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.email,expression:"credentials.email"}],staticClass:"form-control",attrs:{type:"email",name:"email","aria-describedby":"emailHelp",placeholder:"Enter email"},domProps:{value:t.credentials.email},on:{input:function(e){e.target.composing||t.$set(t.credentials,"email",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.credentials.password,expression:"credentials.password"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.credentials.password},on:{input:function(e){e.target.composing||t.$set(t.credentials,"password",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"password"}},[t._v("Confirm Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.confirm,expression:"confirm"}],staticClass:"form-control",attrs:{type:"password",name:"password",placeholder:"Confirm"},domProps:{value:t.confirm},on:{input:function(e){e.target.composing||(t.confirm=e.target.value)}}})]),n("div",{staticClass:"form-group"},t._l(t.errors,function(e){return n("span",{staticClass:"text-danger"},[t._v("\n                        "+t._s(e)+"\n                    ")])}),0),n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")])])])])])])},R=[],A={data:function(){return{credentials:{name:"",email:"",password:""},confirm:"",errors:[]}},watch:{confirm:function(){this.credentials.password!=this.confirm?this.errors[0]="Passwords no match":this.errors=[]}},methods:{onSubmitRegister:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("registerUser",this.credentials).then(function(t){e.credentials.email,e.credentials.password;e.$store.dispatch("retrieveToken",e.credentials),e.$router.push({name:"tasks"})});case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},N=A,D=Object(p["a"])(N,I,R,!1,null,null,null),L=D.exports,M=[{path:"/tasks",name:"tasks",component:$},{path:"/register",name:"register",component:L},{path:"/login",name:"login",component:U}],H=M,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav-bar"),n("router-view")],1)},W=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark"},[n("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t._v("VUE Tasks")]),n("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[n("ul",{staticClass:"navbar-nav mr-auto"},[t.loggedIn?t._e():n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:{name:"login"}}},[t._v("\n                    Login\n                ")])],1),t.loggedIn?t._e():n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:{name:"register"}}},[t._v("\n                    Register\n                ")])],1),t.loggedIn?n("li",{staticClass:"nav-item"},[n("router-link",{staticClass:"nav-link",attrs:{to:{name:"tasks"}}},[t._v("\n                    Tasks\n                ")])],1):t._e(),t.loggedIn?n("li",{staticClass:"nav-item"},[n("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:t.onClickLogout}},[t._v("Logout\n                ")])]):t._e()]),t.loggedIn?n("span",{staticClass:"navbar-text"},[t._v("\n            Wellcome, "+t._s(t.loggeduser)+"\n        ")]):t._e()])])},F=[],V={computed:{loggedIn:function(){return this.$store.getters.loggedIn},loggeduser:function(){return this.$store.getters.loggedUser}},methods:{onClickLogout:function(){this.$store.dispatch("destroyToken"),this.$router.push({name:"login"})}}},q=V,z=Object(p["a"])(q,B,F,!1,null,null,null),G=z.exports,K={components:{NavBar:G}},Q=K,X=Object(p["a"])(Q,J,W,!1,null,null,null),Y=X.exports,Z=n("795b"),tt=n.n(Z),et=n("bc3a"),nt=n.n(et),at={tasks:[],token:null},st={tasks:function(t){return t.tasks}},rt="./api/tasks/",ot={fetchTasks:function(t,e){var n=t.commit;return new tt.a(function(t,a){n("setToken",e),nt.a.get(rt,{headers:{"token-access":at.token}}).then(function(e){"error"==e.data.status?a():(n("setTasks",e.data),t())}).catch(function(t){console.log(t)})})},addTask:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,n){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,nt.a.post(rt,n,{headers:{"token-access":at.token}}).then(function(t){return a("newTask",n)}).catch(function(t){return console.log(t)});case 3:case"end":return t.stop()}},t)}));function e(e,n){return t.apply(this,arguments)}return e}(),deleteTask:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,n,a){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,t.next=3,nt.a.delete(rt+n._id,{headers:{"token-access":at.token}}).then(function(t){return s("removeTask",a)}).catch(function(t){return console.log(t)});case 3:case"end":return t.stop()}},t)}));function e(e,n,a){return t.apply(this,arguments)}return e}(),updateTask:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,n,a){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,t.next=3,nt.a.put(rt+n._id,n,{headers:{"token-access":at.token}}).then(function(t){return s("refreshTask",a,n)}).catch(function(t){return console.log(t)});case 3:case"end":return t.stop()}},t)}));function e(e,n,a){return t.apply(this,arguments)}return e}()},it={setToken:function(t,e){return t.token=e},setTasks:function(t,e){return t.tasks=e},newTask:function(t,e){return t.tasks.push(e)},removeTask:function(t,e){return t.tasks.splice(e,1)},refreshTask:function(t,e,n){return t.tasks[e]=n}},ct={state:at,getters:st,actions:ot,mutations:it},lt=(n("7f7f"),{token:localStorage.getItem("access_token")||null,loggedUser:localStorage.getItem("user")||null}),ut={token:function(t){return t.token},loggedUser:function(t){return t.loggedUser},loggedIn:function(t){return null!==t.token}},dt="./users",mt={retrieveToken:function(t,e){var n=t.commit;return new tt.a(function(t,a){nt.a.post("".concat(dt,"/authenticate"),e).then(function(e){if("error"==e.data.status)a();else{var s=e.data.token;localStorage.setItem("access_token",s),localStorage.setItem("user",e.data.user.name),n("retrieveToken",s),n("setLoggedUser",e.data.user.name),t(e)}}).catch(function(t){console.log(t),a(t)})})},registerUser:function(t,e){t.commit;return new tt.a(function(t,n){nt.a.post("".concat(dt,"/register"),e).then(function(e){t(e)}).catch(function(t){n(t)})})},destroyToken:function(t){var e=t.commit;localStorage.removeItem("access_token"),localStorage.removeItem("user"),e("destroyToken")}},pt={retrieveToken:function(t,e){return t.token=e},destroyToken:function(){return lt.token=null},setLoggedUser:function(t,e){return t.loggedUser=e}},ft={state:lt,getters:ut,actions:mt,mutations:pt};a["a"].use(_["a"]);var vt=new _["a"].Store({modules:{Todos:ct,Auth:ft}}),gt=n("a7fe"),ht=n.n(gt);a["a"].config.productionTip=!1,a["a"].use(ht.a,nt.a),a["a"].use(s["a"]);var kt=new s["a"]({routes:H,mode:"history"});new a["a"]({store:vt,router:kt,render:function(t){return t(Y)}}).$mount("#app")}});
//# sourceMappingURL=app.da31a308.js.map